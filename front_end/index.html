<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>通讯录</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- 登录界面 -->
    <div id="login-container" class="login-wrapper">
        <div class="login-box">
            <h2>用户登录</h2>
            <div class="input-group">
                <input type="text" id="login-account" placeholder="请输入账号">
            </div>
            <div class="input-group">
                <input type="password" id="login-password" placeholder="请输入密码">
            </div>
            <button id="btn-login" class="primary-btn">登录</button>
            <div class="login-footer">
                <a href="#" id="link-register">注册账号</a>
            </div>
        </div>
    </div>

    <!-- 注册界面 (默认隐藏) -->
    <div id="register-container" class="login-wrapper hidden">
        <div class="login-box">
            <h2>注册账号</h2>
            <div class="input-group">
                <input type="text" id="reg-name" placeholder="请输入昵称">
            </div>
            <div class="input-group">
                <input type="text" id="reg-phone" placeholder="请输入手机号">
            </div>
            <div class="input-group">
                <input type="password" id="reg-password" placeholder="请输入密码">
            </div>
            <button id="btn-register" class="primary-btn">注册</button>
            <div class="login-footer">
                <a href="#" id="link-login">返回登录</a>
            </div>
        </div>
    </div>

    <!-- 主界面 (默认隐藏) -->
    <div id="main-container" class="main-wrapper hidden">
        <!-- 1. 最左侧导航栏 -->
        <div class="sidebar">
            <div class="avatar-section">
                <img src="https://ui-avatars.com/api/?name=Me&background=random" alt="Avatar" class="my-avatar"
                    id="my-avatar">
            </div>
            <div class="nav-icons">
                <div class="nav-item active" data-tab="chat" title="聊天">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor"
                            d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
                    </svg>
                </div>
                <div class="nav-item" data-tab="contacts" title="通讯录">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor"
                            d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                    </svg>
                </div>
                <div class="nav-item" data-tab="me" title="我">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor"
                            d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z" />
                    </svg>
                </div>
            </div>
            <div class="bottom-icons">
                <div class="nav-item" title="更多">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
                    </svg>
                </div>
            </div>
        </div>

        <!-- 2. 中间列表栏 -->
        <div class="list-panel">
            <!-- 顶部搜索 -->
            <div class="search-section">
                <div class="search-box">
                    <span class="search-icon">🔍</span>
                    <input type="text" id="search-input" placeholder="搜索">
                </div>
                <button class="add-btn">+</button>

                <!-- 搜索下拉结果 -->
                <div id="search-dropdown" class="search-dropdown hidden">
                    <!-- 动态内容 -->
                </div>
            </div>

            <!-- 列表内容区 -->
            <div id="list-content" class="list-content">
                <!-- 动态生成的内容 -->
            </div>
        </div>

        <!-- 3. 右侧主内容区 -->
        <div class="main-content">
            <!-- 聊天窗口 -->
            <div id="chat-view" class="view-section">
                <div class="chat-header">
                    <div class="chat-title" id="chat-title">通讯录</div>
                    <div class="chat-options">...</div>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <!-- 消息气泡 -->
                    <div class="message-item received">
                        <img src="https://ui-avatars.com/api/?name=Contacts" class="avatar">
                        <div class="bubble">欢迎使用通讯录。目前消息功能尚未连接后端。</div>
                    </div>
                </div>
                <div class="chat-input-area">
                    <div class="toolbar">
                        <span class="tool-icon">😊</span>
                        <span class="tool-icon">📁</span>
                        <span class="tool-icon">✂️</span>
                        <span class="tool-icon">💬</span>
                    </div>
                    <textarea id="msg-input" placeholder=""></textarea>
                    <div class="action-bar">
                        <button class="send-btn" id="btn-send">发送(S)</button>
                    </div>
                </div>
            </div>

            <!-- 空白页/默认页 -->
            <div id="empty-view" class="view-section hidden center-content">
                <div class="wechat-logo-placeholder">
                    <svg width="100" height="100" viewBox="0 0 24 24" fill="#e0e0e0">
                        <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
                    </svg>
                </div>
            </div>

            <!-- 新的朋友列表页 -->
            <div id="new-friends-view" class="view-section hidden">
                <div class="chat-header">
                    <div class="chat-title">新的朋友</div>
                </div>
                <div class="new-friends-list" id="new-friends-list" style="padding: 20px;">
                    <!-- 动态生成 -->
                </div>
            </div>

            <!-- 通讯录详情页 -->
            <div id="contact-view" class="view-section hidden center-content">
                <div class="contact-card" style="position: relative;">
                    <!-- 右上角更多操作按钮 -->
                    <div id="btn-contact-options" class="contact-options-btn hidden">...</div>
                    <!-- 下拉菜单 -->
                    <div id="contact-options-menu" class="contact-options-menu hidden">
                        <div class="menu-item" id="btn-edit-remark">设置备注</div>
                        <div class="menu-item delete" id="btn-delete-friend">删除好友</div>
                    </div>

                    <div class="contact-header">
                        <div class="contact-name" id="contact-name">用户名称</div>
                    </div>
                    <div class="contact-info" id="contact-info-container">
                        <!-- 动态生成 -->
                    </div>
                    <button id="btn-contact-msg" class="primary-btn"
                        style="width: 140px; margin-top: 40px;">发消息</button>
                    <button id="btn-contact-add" class="primary-btn"
                        style="width: 140px; margin-top: 40px; background-color: #f2f2f2; color: #07c160; border: 1px solid #e7e7e7;">添加到通讯录</button>
                </div>
            </div>

            <!-- "我" 详情页 -->
            <div id="me-view" class="view-section hidden center-content">
                <div class="contact-card">
                    <div class="contact-header">
                        <div class="contact-name" id="my-name">我的名字</div>
                        <div class="contact-sub" id="my-signature">我的签名...</div>
                    </div>
                    <div class="contact-info">
                        <div class="info-row"><span class="label">uid</span><span class="value"
                                id="my-uid">wxid_me</span></div>
                    </div>
                    <button id="btn-open-settings" class="primary-btn"
                        style="width: 140px; margin-top: 40px; background-color: #f2f2f2; color: #333; border: 1px solid #e7e7e7;">设置</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 模态框：通用遮罩 -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <!-- 加好友模态框 -->
        <div id="modal-add-friend" class="modal-box hidden">
            <h3>申请添加朋友</h3>
            <div class="input-group">
                <input type="text" id="add-friend-msg" placeholder="发送添加朋友申请">
            </div>
            <div class="modal-footer">
                <button class="secondary-btn" id="btn-cancel-add">取消</button>
                <button class="primary-btn" id="btn-confirm-add">发送</button>
            </div>
        </div>

        <!-- 设置模态框 -->
        <div id="modal-settings" class="modal-box hidden">
            <h3>设置</h3>
            
            <div class="input-group">
                <label style="display:block; margin-bottom:5px; font-size:12px; color:#999;">修改昵称</label>
                <input type="text" id="setting-name" placeholder="请输入新昵称">
            </div>

            <div class="input-group">
                <label style="display:block; margin-bottom:5px; font-size:12px; color:#999;">修改uid</label>
                <input type="text" id="setting-uid" placeholder="请输入新uid">
            </div>

            <div class="separator" style="border-top: 1px dashed #eee; margin: 15px 0;"></div>

            <div class="input-group">
                <label style="display:block; margin-bottom:5px; font-size:12px; color:#999;">修改密码(选填)</label>
                <input type="password" id="setting-old-pass" placeholder="请输入旧密码">
            </div>
            <div class="input-group">
                <input type="password" id="setting-new-pass" placeholder="请输入新密码">
            </div>
            <div class="input-group">
                <input type="password" id="setting-confirm-pass" placeholder="请输入确认密码">
            </div>

            <div class="modal-footer">
                <button class="secondary-btn" id="btn-cancel-setting">取消</button>
                <button class="primary-btn" id="btn-save-setting">保存</button>
            </div>
        </div>
    </div>

    <script src="lru_cache.js"></script>
    <script src="app.js"></script>
</body>

</html>