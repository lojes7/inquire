# 数据结构课程设计开题报告

> 课程名称：数据结构课程设计  
> 文档版本：v1.0  
> 提交日期：2025年12月29日

## 一、基本信息

- **项目名称**：基于“最常访问好友”的雪花ID生成器和缓存替换策略
- **小组编号**：_____________________________
- **关键词**：哈希、链表
- **代码仓库**：http://czu.candysanjo.top:3000/24030516/vvechat

## 二、项目概述

### 2.1 项目背景

在通讯应用场景中，“最常访问好友” 功能需要高效管理用户访问记录，同时系统需为每个好友关系、消息、用户账号生成全局唯一ID，避免数据冲突。依赖数据库自增主键存在主键易预测、不可控的问题，而缓存访问记录时若未采用合理的替换策略，会导致频繁缓存失效、访问效率降低。本项目模拟通讯应用中查看 “最常访问好友” 场景，结合雪花算法与LRU缓存替换策略，解决唯一ID生成与高频访问数据缓存优化问题，深化数据结构在实际场景中的应用。

### 2.2 要解决的问题

1. 解决全局唯一ID生成问题：确保生成的ID不重复、且能满足高并发和请求过多情况下的正确性和性能。
2. 优化“最常访问好友”缓存管理：采用合理的缓存替换策略，高效存储用户高频访问好友数据，提升访问响应速度。
3. 整合功能并落地实现：实现系统前后端，完成系统压测验证性能。

### 2.3 项目意义

1. 实践价值：模拟真实开发需求，解决唯一ID生成与缓存优化的实际问题，为同类系统开发打好基础。
2. 学习价值：深入理解雪花算法的设计原理，熟练运用哈希表、双向链表实现LRU缓存策略，掌握数据结构在性能优化中的核心作用。
3. 能力提升：提升前后端协同开发、系统性能测试、问题排查及文档撰写能力，培养工程化思维与团队协作意识。

## 三、项目目标与预期成果

### 3.1 项目目标

- 目标1：能够正确地使用 “雪花算法” 生成全局唯一ID，并通过压测
- 目标2：基于 “LRU” 策略，实现缓存替换
- 目标3：设计良好的测试用例和图形化界面来演示结果

### 3.2 预期成果

- [x] 可运行的程序代码
- [x] 项目设计文档
- [x] 测试用例及测试报告
- [x] 演示PPT/演示视频
- [ ] 其他:____________________________________________________

### 3.3 验收标准

> 如何判断项目成功完成(功能、性能、测试等方面的具体指标)

- 功能要求：

  1. 雪花ID生成器能够正确生成全局唯一ID
  2. 缓存完成好友信息的增、删、改，缓存满时正确进行淘汰机制
  3. 前端正确发送请求，后端数据实时返回

- 性能要求：

  1. 雪花ID生成器：压测并发量 $\geq$ 1000QPS，每毫秒请求数
  2. 缓存：增删改时间复杂度 $\leq$  O(1)，缓存命中率 $\geq$ 85%
  3. 系统稳定性：服务器持续运行不发生崩溃

- 测试要求：

  1. 雪花ID：构建一个简单的并发模拟环境：多个工作线程或多个进程分别代表不同“节点”，每个节点在同一时间窗口内生成大量 ID，并汇总到同一检查模块进行验证。至少验证全局唯一性，分析生成吞吐量和性能瓶颈。

  2. 缓存：设计至少两种访问模式的测试序列：

     • 均匀随机访问：模拟随机键访问，测算不同缓存容量下的命中率。

     • Zipf 分布热度访问：模拟部分“热点”数据频繁访问，测算命中率与淘汰频次。

## 四、小组成员与分工

| 姓名   | 学号     | 主要职责                                                     | 预计工作量占比 |
| ------ | -------- | ------------------------------------------------------------ | -------------- |
| 刘浩文 | 24030516 | 使用 Golang 搭建系统后端，完成雪花ID生成器和缓存替换策略代码的编写 | 60%            |
| 马牧原 | 24030518 | 使用 JavaScript 等前端技术为项目搭建图形化界面，并使用 Python 完成系统压测 | 40%            |

**协作方式**：

- 交流工具：线下交流、微信
- 任务管理：编写文档
- 代码管理：gitea

## 五、技术方案

### 5.1 核心数据结构

| 功能需求          | 采用的数据结构  | 时间复杂度 | 选择理由                                                     |
| ----------------- | --------------- | ---------- | ------------------------------------------------------------ |
| LRU缓存存储与替换 | 哈希表+双向链表 | O(1)       | 哈希表用于快速定位缓存节点（O(1) 查询），双向链表用于维护节点访问顺序（O(1)调整节点位置、删除尾节点） |

### 5.2 主要算法

- 算法1：雪花算法，复杂度：O(1)
- 算法2：LRU缓存替换算法，复杂度：O(1)

### 5.3 实现方案

**开发语言**：后端：Golang、前端：JavaScript/HTML/CSS、测试：Python

**开发环境**：

- 数据库：Postgres
- 系统：macOS

**模块设计**：(简要说明程序的主要模块及其功能)

1. 雪花ID生成模块：负责生成全局唯一ID，核心包含时间戳位、机器ID位、序列号位的拼接与计算，支持配置机器ID，处理序列号溢出问题。
2. LRU缓存模块：实现缓存的添加、查询、删除、替换功能，维护缓存节点访问顺序，当缓存达到最大容量时自动替换最少最近使用的节点，提供缓存命中率统计接口。
3. 前后端接口模块：基于Gin框架提供RESTful接口，包含ID生成接口、缓存操作接口，供前端调用。
4. 前端展示模块：负责搭建图形化界面，展示结果。
5. 好友模块：负责完成和好友相关的操作。
6. 压测模块（Python）：模拟高并发场景下的ID生成请求与缓存访问请求，统计并发量、响应时间、错误率等性能指标。

**输入输出设计**：

- 输入方式：前端输入/脚本输入	
- 输出方式：前端展示、控制台输出日志

## 六、进度安排

| 阶段 | 主要任务 | 负责人 | 起止时间 | 输出成果 |
|------|----------|--------|----------|----------|
| 第1周 | 系统后端、雪花ID和缓存实现 | 刘浩文 | 12.29-12.31 | 接口能正确工作的项目 |
| 第2周 | 前后端联调以及压测 | 马牧原、刘浩文 | 1.4-1.8 | 完整的可运行的项目 |

**关键节点**：

- [x] 12月29日：需求分析完成
- [x] 12月29日：设计方案完成
- [x] 12月31日：核心功能实现
- [x] 1月5日：测试完成
- [x] 1月8日：文档和演示完成

## 附录：可能遇到的困难及解决思路

1. 缓存和数据库如何保证强一致性：

   解决思路：优先保证缓存和数据库的一致性，再考虑突发情况（如断电）时的数据如何恢复，考虑使用 WAL 或其他方法进行数据恢复。

   































